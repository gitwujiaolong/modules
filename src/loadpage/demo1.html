<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./demo.css">
    <link rel="stylesheet" href="../loadingPage/loadingPage.css">
    <link rel="stylesheet" href="../loadpage/loadpage.css">
    <link rel="stylesheet" href="./animate.css">


</head>
<body>
    <div id="demo1" data-role="page" class="page active" style="display: block;">
        <p>demo1</p>
        <a href="./demo3.html" data-rel="page">error-404</a>
        <a href="http://www.twitter.com/" data-rel="page">error-timeout 20s</a>
        <a href="http://www.baidu.com/">extern link</a>
        <p>Animate</p>
        <a href="./demo2.html" data-rel="page" data-transition-out="slideOutLeft" data-transition-in="slideInRight">default</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="slideOutDown" data-transition-in="slideInUp">up-down</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="fadeOutDown" data-transition-in="fadeInDown">fade</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="bounceOutUp" data-transition-in="bounceInUp">bounce</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="fadeOut" data-transition-in="lightSpeedIn">lightSpeed</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="rotateOutDownLeft" data-transition-in="rotateInDownRight">rotate</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="rollOut" data-transition-in="rollIn">roll</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="fadeOut" data-transition-in="zoomInUp">zoom</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="fadeOut" data-transition-in="flipInX">flip</a>
        <a href="./demo2.html" data-rel="page" data-transition-out="flipOutDown" data-transition-in="flipInDown">custom自定义</a>
    </div>
    <script src='../_fixMobile/HTMLElement.js'></script>
    <script src='../_fixMobile/CustomEvent.js'></script>
    <script src='../_fixMobile/EventPath.js'></script>
    <script src='../loadingPage/loadingPage.js'></script>
    <script src='../toast/toast.js'></script>
    <script src='./loadpage.js'></script>
    <script type="text/javascript">
      window.onerror = function(msg, url, line, col, err) {
        msg = 'CUA:' + navigator.userAgent + '\nURL:' + location.href + '\nERR:' + (url || "local") + ':' + (line || -1) + ':' + (col || -1) + ' ' + msg + '\nSTACK:' + ((err && err.stack) || "");
        alert(msg)

        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/log', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({
          msg: msg
        }));

        if (msg.indexOf('pingpp') !== -1) {
          alert('支付模块未能加载，请尝试刷新网页');
        } else if (msg.indexOf('WeixinJSBridge') !== -1) {
          alert('微信游览器初始化错误，请尝试刷新网页');
        } else if (msg.indexOf('Script error') !== -1 || url === ':0') {

          if (confirm('网页加载过慢，建议刷新一下')) {
            location.reload();
          }

        } else if (msg.indexOf('Illegal constructor') !== -1) {
          alert('您的游览器可能过旧或异常，请刷新网页或请尝试其他游览器。');
        } else {
          alert('抱歉，您的游览器出现未知异常，请刷新网页或请尝试其他游览器。');
        }
      }
    </script>
</body>
</html>
